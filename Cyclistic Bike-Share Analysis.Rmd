---
title: "Cyclistic Bike-Share Analysis Case Study [R]"
author: "Mohani Lal Bhurtel"
date: "2025-01-22"
output: html_document
editor_options: 
  markdown: 
    wrap: 72
---

# 1. Introduction

This case study is the Capstone Project of Google Data Analytics
Professional Certificate . In this case study I am working as a junior
data analyst in the marketing analyst team at Cyclistic, a fictional
bike-share company in Chicago.

**Cyclistic** operates a bike-share program with more than 5,800
bicycles and 600 docking stations across Chicago. The company stands out
by offering a diverse fleet, including reclining bikes, hand tricycles,
and cargo bikes, which makes bike-sharing more accessible to people with
disabilities and riders who cannot use standard two-wheeled bikes. While
the majority of Cyclistic's riders use traditional bikes, approximately
8% opt for assistive options. Cyclistic riders are typically leisure
users, but around 30% use the bikes for commuting to work.

Cyclistic launched its successful bike-share offering in 2016, and since
then, the program has expanded to include 5,824 bicycles, which are
geotracked and locked into a network of 692 stations. Riders can unlock
bikes from one station and return them to any other station in the
system at any time.

The **Marketing Director** believes that the future success of Cyclistic
depends on increasing the number of **annual memberships**. Therefore,
my teamâ€™s objective is to understand the behavioral differences between
casual riders and annual members, in order to design a marketing
strategy that will encourage casual riders to convert to annual
memberships. Our findings will be presented to the Cyclistic executive
team, who must approve the recommendations. Our analysis will be
supported by data-driven insights and professional data visualizations.

Cyclistic offers two types of pricing plans: - **Single-ride passes** -
**Full-day passes** - **Annual memberships**

Customers who purchase single-ride or full-day passes are considered
**Casual riders**, while customers who purchase annual memberships are
classified as **Cyclistic members**.

To answer the key business questions, I followed the steps of the data
analysis process: **ask**, **prepare**, **process**, **analyze**,
**share**, and **act**.

## 2. Ask

The key question guiding this analysis is:

-   **How do Annual members and Casual riders use Cyclistic bikes
    differently?**

#### Key Stakeholders:

-   **Lily Moreno**, Director of Marketing (Manager)
-   **Cyclistic Executive Team**

#### Objective:

-   First, the Cyclistic executive team must approve our
    recommendations, which will be supported by data insights and
    visualizations.
-   Based on these insights, my team will design a new marketing
    strategy aimed at converting casual riders into annual members.

## 3. Prepare

### Data Description:

The data used in this analysis is the **Cyclistic Historical Trip
Data**. This data covers the past 12 months, from **August 1, 2022, to
July 31, 2023**, and is stored in CSV files, with each file representing
one month of data. In total, there are **12 CSV files**.

The data is well-organized and structured, making it suitable for
analysis. The datasets have different names to represent the various
months of data, and these datasets are reliable, original, and current,
as they have been provided by **Motivate International Inc.** under an
appropriate license.

-   **Reliability**: The data comes from a real bike-sharing company in
    Chicago, ensuring its authenticity.
-   **Originality**: The data is directly sourced from Cyclistic's
    operational systems.
-   **Current**: The dataset reflects data from the most recent 12-month
    period.
-   **Credibility**: There are no issues with bias or credibility in the
    data.
-   **Comprehensiveness**: While the data is quite comprehensive, it
    lacks certain information, such as data on specific bike types
    (e.g., reclining bikes, hand tricycles, cargo bikes), which are used
    by about 8% of riders.

### Data Integrity:

-   **Accurate**: The data is verified and accurately reflects the trip
    history.
-   **Consistent**: The data is consistent across months and properly
    structured.
-   **Trustworthy**: As it comes from a legitimate source, the data can
    be considered trustworthy.

### Limitations:

There are a few limitations with the data: - **Data Privacy**: Riders'
personally identifiable information (PII) is not included, so I cannot
connect ride purchases to personal details such as addresses or credit
card numbers. - **Financial Data**: Information about the fare for each
ride is not available, limiting analysis of how much casual riders might
spend compared to annual members. - **Bike Type Data**: The data does
not specify the usage of reclining bikes, hand tricycles, and cargo
bikes. However, it is known that about 8% of riders use these assistive
bike options.

## 4. Process Load necessary library

```{r}
library(tidyverse) #helps wrangle data
library(conflicted)
library(janitor)
library(ggplot2)
```

Set dplyr::filter and dplyr::lag as the default choices

```{r}
conflict_prefer("filter", "dplyr")
conflict_prefer("lag", "dplyr")
```

### 4.1 COLLECT DATA

```{r}
january_2024 <- read_csv("C:/Users/Ashis/OneDrive/Desktop/Coursera/Project 2024/202401-divvy-tripdata.csv")
february_2024 <- read_csv("C:/Users/Ashis/OneDrive/Desktop/Coursera/Project 2024/202402-divvy-tripdata.csv")
march_2024 <- read_csv("C:/Users/Ashis/OneDrive/Desktop/Coursera/Project 2024/202403-divvy-tripdata.csv")
april_2024 <- read_csv("C:/Users/Ashis/OneDrive/Desktop/Coursera/Project 2024/202404-divvy-tripdata.csv")
may_2024 <- read_csv("C:/Users/Ashis/OneDrive/Desktop/Coursera/Project 2024/202405-divvy-tripdata.csv")
june_2024 <- read_csv("C:/Users/Ashis/OneDrive/Desktop/Coursera/Project 2024/202406-divvy-tripdata.csv")
july_2024 <- read_csv("C:/Users/Ashis/OneDrive/Desktop/Coursera/Project 2024/202407-divvy-tripdata.csv")
august_2024 <- read_csv("C:/Users/Ashis/OneDrive/Desktop/Coursera/Project 2024/202408-divvy-tripdata.csv")
september_2024 <- read_csv("C:/Users/Ashis/OneDrive/Desktop/Coursera/Project 2024/202409-divvy-tripdata.csv")
october_2024 <- read_csv("C:/Users/Ashis/OneDrive/Desktop/Coursera/Project 2024/202410-divvy-tripdata.csv")
november_2024 <- read_csv("C:/Users/Ashis/OneDrive/Desktop/Coursera/Project 2024/202411-divvy-tripdata.csv")
december_2024 <- read_csv("C:/Users/Ashis/OneDrive/Desktop/Coursera/Project 2024/202412-divvy-tripdata.csv")
```

### 4.2 WRANGLE DATA AND COMBINE INTO A SINGLE FILE

Compare column names each of the files While the names don't have to be
in the same order, they do need to match perfectly before we can use a
command to join them into one file.

```{r}
colnames(january_2024)
colnames(february_2024)
colnames(march_2024)
colnames(april_2024)
colnames(may_2024)
colnames(june_2024)
colnames(july_2024)
colnames(august_2024)
colnames(september_2024)
colnames(october_2024)
colnames(november_2024)
colnames(december_2024)
```

Stack all individual month's data frames into one big data frame.

```{r}
all_trips <- bind_rows(january_2024,february_2024,march_2024,april_2024,may_2024,june_2024,
                        july_2024,august_2024,september_2024,october_2024,november_2024,december_2024)
```

Remove lat, long as they are no needed for analysis

```{r}
all_trips <- all_trips %>%
  select(-c(start_lat, start_lng, end_lat, end_lng))
```

Inspect the new dataframe and look for inconguencies

```{r}
str(all_trips)
```

Drop NA fields

```{r}
all_trips <- drop_na(all_trips)
```

Convert ride_id and rideable_type to character so that they can stack
correctly.

```{r}
all_trips <-  mutate(all_trips, ride_id = as.character(ride_id))
```

### 4.3 CLEAN UP AND ADD DATA TO PREPARE FOR ANALYSIS

Inspect the new table that has been created. List of column names

```{r}
colnames(all_trips)
```

How many rows are in data frame?

```{r}
nrow(all_trips)
```

Dimensions of the data frame?

```{r}
dim(all_trips)
```

See the first 6 rows of data frame. Also tail(all_trips).

```{r}
head(all_trips)
```

See list of columns and data types (numeric, character, etc).

```{r}
str(all_trips)
```

Statistical summary of data. Mainly for numerics.

```{r}
summary(all_trips) 

```

Add columns that list the date, month, day, and year of each ride. This
will allow us to aggregate ride data for each month, day, or year ...
before completing these operations we could only aggregate at the ride
level.

```{r}
all_trips$date <- as.Date(all_trips$started_at) #The default format is yyyy-mm-dd
all_trips$month <- format(as.Date(all_trips$date), "%m")
all_trips$day <- format(as.Date(all_trips$date), "%d")
all_trips$year <- format(as.Date(all_trips$date), "%Y")
all_trips$day_of_week <- format(as.Date(all_trips$date), "%A")
```

Add a "ride_length" calculation to all_trips (in seconds).

```{r}
all_trips$ride_length <- difftime(all_trips$ended_at,all_trips$started_at)
```

Inspect the structure of the columns.

```{r}
str(all_trips)
```

Convert "ride_length" from Factor to numeric so we can run calculations
on the data.

```{r}
is.factor(all_trips$ride_length)
all_trips$ride_length <- as.numeric(as.character(all_trips$ride_length))

is.numeric(all_trips$ride_length)
```

Remove "bad" data. The dataframe includes a few hundred entries when
bikes were taken out of docks and checked for quality by Divvy or
ride_length was negative. We will create a new version of the dataframe
(v2) since data is being removed.

```{r}
all_trips_v2 <- all_trips[!(all_trips$start_station_name == "HQ QR" | all_trips$ride_length<0),]
```

## 5.Analyze

Descriptive analysis on ride_length (all figures in seconds).

```{r}
mean(all_trips_v2$ride_length) #straight average (total ride length / rides)
median(all_trips_v2$ride_length) #midpoint number in the ascending array of ride lengths
max(all_trips_v2$ride_length) #longest ride
min(all_trips_v2$ride_length) #shortest ride
```

Compare members and casual users.

```{r}
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = mean)
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = median)
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = max)
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = min)
```

See the average ride time by each day for members vs casual users.

```{r}
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual + all_trips_v2$day_of_week,
          FUN = mean)
```

Notice that the days of the week are out of order. Let's fix that.

```{r}
all_trips_v2$day_of_week <- ordered(all_trips_v2$day_of_week, levels=c("Sunday", "Monday",
                                                                       "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"))
```

Now, let's run the average ride time by each day for members vs casual
users.

```{r}
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual + all_trips_v2$day_of_week,
          FUN = mean)
```

Analyze ridership data by type and weekday

```{r}
all_trips_v2 %>%
  mutate(weekday = wday(started_at, label = TRUE)) %>%  #creates weekday field using wday()
  group_by(member_casual, weekday) %>%  #groups by usertype and weekday
  summarize(number_of_rides = n()  #calculates the number of rides and average duration
            ,average_duration = mean(ride_length)) %>%  # calculates the average duration
  arrange(member_casual, weekday)  # sorts the trip by member and weekdays
```

## 6. Share

Let's visualize the number of rides by rider type.

```{r}
all_trips_v2 %>%
  mutate(weekday = wday(started_at, label = TRUE)) %>%
  group_by(member_casual, weekday) %>%
  summarise(number_of_rides = n()
            ,average_duration = mean(ride_length)) %>%
  arrange(member_casual, weekday) %>%
  ggplot(aes(x = weekday, y = number_of_rides, fill = member_casual)) +
  geom_col(position = "dodge") +
  geom_text(aes(label = number_of_rides), position = position_dodge(0.9), vjust = -0.3) + 
  labs(title = "Number of Rides by Rider Type and Weekday", x = "Weekday", y = "Number of Rides") +
  theme_minimal()
```

Let's create a visualization for average duration.

```{r}
all_trips_v2 %>%
  mutate(weekday = wday(started_at, label = TRUE)) %>%
  group_by(member_casual, weekday) %>%
  summarise(number_of_rides = n()
            ,average_duration = mean(ride_length)) %>%
  arrange(member_casual, weekday) %>%
  ggplot(aes(x = weekday, y = average_duration, fill = member_casual)) +
  geom_col(position = "dodge") +
  geom_text(aes(label = round(average_duration, 1)), position = position_dodge(0.9), vjust = -0.3) +
  labs(title = "Average Ride Duration by Rider Type and Weekday", x = "Weekday", y = "Average Duration (seconds)") +
  theme_minimal()
```

Heatmap of average ride length by hour of day and day of the week.

```{r}
all_trips_v2 %>%
  mutate(hour = format(as.POSIXct(started_at), "%H"),
         weekday = wday(started_at, label = TRUE)) %>%
  group_by(hour, weekday) %>%
  summarise(avg_duration = mean(ride_length)) %>%
  ggplot(aes(x = hour, y = weekday, fill = avg_duration)) +
  geom_tile() +
  scale_fill_viridis_c(option = "C") +
  labs(title = "Heatmap of Average Ride Duration by Hour and Day of Week", 
       x = "Hour of Day", y = "Day of Week", fill = "Avg. Duration (seconds)") +
  theme_minimal()
```

Average Duration by Ryder Type.

```{r}
all_trips_v2 %>%
  group_by(member_casual) %>%
  summarise(number_of_rides = n()
            ,average_duration = mean(ride_length)) %>%
  arrange(member_casual) %>%
  ggplot(aes(x=member_casual, y=average_duration, fill = member_casual)) +
  geom_col(position = "dodge") +
  geom_text(aes(label = round(average_duration, 1)), position = position_dodge(0.9), vjust = -0.3) +
  labs(title = "Average Ride Duration by Rider Type", x = "Ryder Type", y = "Average Duration (seconds)") +
  theme_minimal()
```

Number of rides by rider type.

```{r}
all_trips_v2 %>%
  group_by(member_casual) %>%
  summarise(number_of_rides = n()
            ,average_duration = mean(ride_length)) %>%
  arrange(member_casual) %>%
  ggplot(aes(x = member_casual, y = number_of_rides, fill = member_casual)) +
  geom_col(position = "dodge") +
  geom_text(aes(label = number_of_rides), position = position_dodge(0.9), vjust = -0.3) + 
  labs(title = "Ride Frequency by Rider Type", x = "Ryder Type", y = "Number of Rides") +
  theme_minimal()
```

Ride Frequency by Bike Type in Percentage.

```{r}
all_trips_v2 %>% 
  group_by(rideable_type) %>% 
  summarise(number_of_rides = n()) %>% 
  arrange(rideable_type) %>% 
  ggplot(aes(x = "", y = number_of_rides, fill = rideable_type)) +
  geom_bar(stat = "identity", width = 1, color = "white") +
  coord_polar("y", start = pi/3) +  # Adjust start for similar orientation
  theme_void() +
  geom_text(aes(label = paste0(round((number_of_rides / sum(number_of_rides)) * 100, 1), "%")), 
            position = position_stack(vjust = 0.5), size = 4, color = "white") +  # Add percentage labels
  labs(title = "Ride Frequency by Bike Type in Percentage", fill = "Bike Type") +
  theme(
    plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
    legend.position = "right",
    legend.title = element_text(size = 12),
    legend.text = element_text(size = 10)
  )
```

## 7. Act

### Conclusion

The analysis of Divvy bike trip data from January to December 2024
reveals several insights about user behavior and ride patterns:

1.  Casual riders tend to have longer ride durations compared to
    members, indicating that they may use the service for leisure or
    exploration, while members likely use it for routine commuting.

2.  Casual riders are more active on weekends, suggesting recreational
    use, while members primarily ride during weekdays for commuting.

3.  Both groups show distinct usage patterns across days of the week and
    hours, with casual riders contributing to greater variability.

4.  Different bike types (e.g., classic or electric) are preferred by
    different user groups, aiding in fleet optimization.

### Recommendations

1.  Focus promotions on weekends for casual riders and offer membership
    benefits to encourage conversions.

2.  Ensure bike availability during peak hours (weekdays for members,
    weekends for casual riders).

3.  Optimize station placements based on ridership patterns.

4.  Provide personalized insights (e.g., calories burned, CO2 saved) to
    encourage casual riders to engage more frequently.
5.  Consider loyalty programs or rewards to increase member retention and
    attract new members.

By implementing these insights, Divvy can optimize operations, enhance
customer satisfaction, and drive increased ridership.
